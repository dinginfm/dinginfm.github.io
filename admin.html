<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DinginFM â€” DJ Aylak YÃ¶netim Paneli</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* --- Genel Arka Plan ve Logo --- */
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background-color: #001626;
  color: #e6edf3;
  overflow-x: hidden;
  text-align: center;
  position: relative;
}
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: url('assets/logo.png') no-repeat center center fixed;
  background-size: 40%;
  opacity: 0.15;
  z-index: 0;
}

/* --- Header --- */
header {
  background: #002743;
  padding: 25px 0;
  box-shadow: 0 3px 12px rgba(0,0,0,.6);
  position: sticky;
  top: 0;
  z-index: 2;
}
h1 {color: #ffd43b; margin: 0; font-size: 28px;}
h2 {color: #9fbdd3; font-weight: normal; font-size: 15px; margin-top: 6px;}

/* --- Ana Panel --- */
section {
  position: relative;
  z-index: 1;
  background: rgba(2,43,71,0.85);
  max-width: 950px;
  margin: 30px auto;
  border-radius: 14px;
  padding: 25px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}
.status {
  display: inline-block;
  background: #900;
  color: white;
  border-radius: 10px;
  padding: 4px 10px;
  font-weight: bold;
}
.status.on { background: #009b4d; }

/* --- YayÄ±n Bilgileri --- */
.stats {
  display: flex;
  justify-content: space-around;
  margin-top: 20px;
  flex-wrap: wrap;
}
.stat {
  background: #003d66;
  border-radius: 10px;
  padding: 10px 18px;
  margin: 8px;
  min-width: 130px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}
.stat h3 {
  color: #ffd43b;
  margin: 0;
  font-size: 14px;
}
.stat p { margin: 5px 0; }

/* --- Grafik --- */
canvas {
  margin-top: 20px;
  background: rgba(0,0,0,0.25);
  border-radius: 10px;
  padding: 10px;
}

/* --- Alt MenÃ¼ ButonlarÄ± --- */
.buttons {
  margin-top: 25px;
}
button {
  background: #003d66;
  color: #ffd43b;
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  margin: 5px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background: #ffd43b; color: #001626; }
button.stop { background: #b30000; color: white; }
button.stop:hover { background: #ff4c4c; }

/* --- Mesajlar Paneli --- */
#messagesPanel {
  display: none;
  margin-top: 25px;
  background: rgba(0,0,0,0.3);
  border-radius: 12px;
  padding: 15px;
  max-height: 300px;
  overflow-y: auto;
}
#messagesPanel.active { display: block; }
#messagesPanel ul {
  list-style: none;
  padding: 0;
}
#messagesPanel li {
  background: rgba(255,255,255,0.05);
  margin: 6px 0;
  padding: 10px;
  border-radius: 8px;
  text-align: left;
}

/* --- Footer --- */
footer {
  margin-top: 30px;
  color: #9fbdd3;
  font-size: 13px;
}
</style>
</head>
<body>

<header>
  <h1>ðŸŽ§ DinginFM â€” DJ Aylak YÃ¶netim Paneli</h1>
  <h2>SessizliÄŸin Sesi Burada</h2>
</header>

<section>
  <h3>ðŸ“» YayÄ±n Durumu: <span id="status" class="status">OFF AIR</span></h3>
  <div class="stats">
    <div class="stat"><h3>AnlÄ±k:</h3><p id="current">0</p></div>
    <div class="stat"><h3>Peak:</h3><p id="peak">0</p></div>
    <div class="stat"><h3>Bitrate:</h3><p id="bitrate">â€”</p></div>
    <div class="stat"><h3>ÅžarkÄ±:</h3><p id="song">â€”</p></div>
  </div>

  <canvas id="chart" height="150"></canvas>

  <div class="buttons">
    <button onclick="window.open('http://localhost:8000','_blank')">Icecast Paneli</button>
    <button class="stop" onclick="toggleStream()">CanlÄ± YayÄ±nÄ± Durdur</button>
    <button onclick="toggleMessages()">Mesajlar</button>
    <button onclick="togglePlatforms()">Platformlar</button>
  </div>

  <div id="messagesPanel">
    <h3>ðŸ’¬ Gelen Mesajlar</h3>
    <ul id="messages"></ul>
    <audio id="dingSound" src="assets/ding.mp3" preload="auto"></audio>
  </div>
</section>

<footer>
  Â© 2025 DinginFM â€” SessizliÄŸin Sesi Burada
</footer>

<script>
/* --- Grafik --- */
const ctx = document.getElementById('chart');
const chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: ['10:00','11:00','12:00','13:00','14:00'],
    datasets: [{
      label: 'Dinleyici SayÄ±sÄ±',
      data: [0,1,2,3,2],
      borderColor: '#ffd43b',
      borderWidth: 2,
      fill: false,
      tension: 0.3
    }]
  },
  options: {
    scales: { y: { beginAtZero: true } },
    plugins: { legend: { display: false } }
  }
});

/* --- YayÄ±n Durumu --- */
let onAir = false;
function toggleStream() {
  onAir = !onAir;
  const s = document.getElementById('status');
  s.textContent = onAir ? 'ON AIR' : 'OFF AIR';
  s.className = onAir ? 'status on' : 'status';
}

/* --- Mesaj Paneli --- */
function toggleMessages() {
  const p = document.getElementById('messagesPanel');
  p.classList.toggle('active');
}

/* --- Platformlar (placeholder) --- */
function togglePlatforms() {
  alert('Spotify, YouTube ve Podcast bÃ¶lÃ¼mÃ¼ yakÄ±nda burada olacak ðŸŽµ');
}

/* --- Mesaj Sistemi --- */
let lastCount = 0;
const ding = document.getElementById('dingSound');

function loadMessages() {
  fetch('messages.json')
    .then(r => r.json())
    .then(data => {
      const box = document.getElementById('messages');
      box.innerHTML = '';
      data.forEach(m => {
        const li = document.createElement('li');
        li.textContent = `${m.time} â€” ${m.name}: ${m.message}`;
        box.appendChild(li);
      });
      if (data.length > lastCount) {
        ding.play();
        document.title = "ðŸ“¨ Yeni Mesaj Var! â€” DinginFM";
        setTimeout(() => document.title = "DinginFM â€” DJ Aylak YÃ¶netim Paneli", 3000);
      }
      lastCount = data.length;
    })
    .catch(() => console.log("Mesajlar alÄ±namadÄ±."));
}

setInterval(loadMessages, 10000);
</script>

</body>
</html>
