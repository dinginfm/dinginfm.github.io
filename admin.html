<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DinginFM â€” DJ Aylak YÃ¶netim Paneli</title>
<style>
  body {
    background:#001626;
    color:#e6edf3;
    font-family:'Segoe UI',sans-serif;
    margin:0;
    text-align:center;
  }
  header {
    background:#002743;
    padding:25px 10px;
    box-shadow:0 3px 12px rgba(0,0,0,.6);
  }
  h1 {color:#ffd43b; margin:0; font-size:26px;}
  h2 {color:#9fbdd3; font-size:15px; margin-top:6px; font-weight:normal;}
  .panel {
    max-width:900px;
    margin:40px auto;
    background:#022b47;
    border-radius:14px;
    padding:30px;
    box-shadow:0 4px 15px rgba(0,0,0,.4);
  }
  .status {
    display:inline-block;
    padding:6px 16px;
    border-radius:10px;
    font-weight:bold;
    margin-bottom:10px;
  }
  .off {background:#c0392b; color:#fff;}
  .on {background:#27ae60; color:#fff;}
  .info {
    display:flex;
    justify-content:space-around;
    flex-wrap:wrap;
    margin-top:20px;
  }
  .info-box {
    background:#013458;
    border-radius:10px;
    padding:15px;
    width:180px;
    margin:8px;
  }
  .info-box h3 {
    margin:0;
    font-size:15px;
    color:#ffd43b;
  }
  .info-box p {
    margin:6px 0 0;
    font-size:18px;
    font-weight:bold;
  }
  .btn-group {
    margin-top:40px;
  }
  a.button {
    display:inline-block;
    margin:10px;
    padding:12px 24px;
    border-radius:10px;
    text-decoration:none;
    font-weight:bold;
    color:#fff;
    transition:0.2s;
  }
  a.live {background:#ffd43b; color:#001626;}
  a.icecast {background:#007bff;}
  a.msg {background:#9b59b6;}
  a.platform {background:#16a085;}
  a.button:hover {opacity:0.85; transform:scale(1.05);}
  footer {
    color:#708090;
    font-size:13px;
    margin-top:40px;
    padding:20px;
  }
</style>
</head>

<body>
  <header>
    <h1>DinginFM â€” DJ Aylak YÃ¶netim Paneli</h1>
    <h2>SessizliÄŸin Sesi Burada</h2>
  </header>

  <section class="panel">
    <div id="status" class="status off">ðŸ”´ OFF AIR</div>

    <div class="info">
      <div class="info-box">
        <h3>AnlÄ±k</h3><p id="listeners">0</p>
      </div>
      <div class="info-box">
        <h3>Peak</h3><p id="peak">0</p>
      </div>
      <div class="info-box">
        <h3>Bitrate</h3><p id="bitrate">â€”</p>
      </div>
      <div class="info-box">
        <h3>ÅžarkÄ±</h3><p id="song">â€”</p>
      </div>
    </div>

    <div class="btn-group">
      <a href="https://marcelo-nonrotational-elke.ngrok-free.dev" class="button icecast" target="_blank">ðŸ”— Icecast Paneli</a>
      <a href="#" class="button live" onclick="location.reload()">ðŸ”´ CanlÄ± YayÄ±nÄ± GÃ¼ncelle</a>
      <a href="#" class="button msg">ðŸ’¬ Mesajlar</a>
      <a href="#" class="button platform">ðŸŽµ Platformlar</a>
    </div>
  </section>

  <footer>Â© 2025 Dingin FM | TÃ¼m HaklarÄ± SaklÄ±dÄ±r</footer>

<script>
async function fetchStatus() {
  try {
    const response = await fetch("https://marcelo-nonrotational-elke.ngrok-free.dev/status-json.xsl");
    const data = await response.json();

    const source = data.icestats.source;

    document.getElementById("listeners").innerText = source.listeners ?? 0;
    document.getElementById("peak").innerText = source.listener_peak ?? 0;
    document.getElementById("bitrate").innerText = source.bitrate ? source.bitrate + " kbps" : "â€”";
    document.getElementById("song").innerText = source.title ?? "â€”";

    const statusEl = document.getElementById("status");
    if (source.listeners >= 0) {
      statusEl.classList.remove("off");
      statusEl.classList.add("on");
      statusEl.innerText = "ðŸŸ¢ ON AIR";
    }
  } catch (error) {
    console.log("BaÄŸlantÄ± kurulamadÄ±:", error);
  }
}

// Her 10 saniyede bir yenile
fetchStatus();
setInterval(fetchStatus, 10000);
</script>
</body>
</html>
