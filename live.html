<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dingin FM â€” CanlÄ± YayÄ±n</title>
  <link rel="stylesheet" href="stil.css">
  <style>
    body {margin:0; background:#001626; color:#e6edf3; font-family:'Segoe UI',sans-serif; text-align:center;}
    .logo {width:150px; margin:20px auto; display:block;}
    header {background:rgba(0,39,67,.85); padding:15px; box-shadow:0 3px 10px rgba(0,0,0,.5);}
    header h1 {color:#ffd43b; margin:0; font-size:28px;}
    header h2 {color:#9fbdd3; margin:5px 0 0 0; font-weight:400;}
    main {margin-top:30px;}
    .status {margin:20px 0; font-size:16px; display:flex; justify-content:center; align-items:center; gap:10px; color:#ffd43b;}
    .led {width:14px; height:14px; border-radius:50%; background:gray; display:inline-block; box-shadow:0 0 10px currentColor;}
    .btn {background:#ffd43b; color:#001626; text-decoration:none; font-weight:700; padding:12px 25px; border-radius:8px; display:inline-block; margin-top:15px; transition:.3s;}
    .btn:hover {background:#ffea84; transform:scale(1.05);}
    footer {background:rgba(0,39,67,.85); padding:15px; font-size:13px; color:#9fbdd3; margin-top:50px;}
  </style>
</head>
<body>
  <img src="assets/logo.png" alt="DinginFM Logo" class="logo">

  <header>
    <h1>DINGIN FM</h1>
    <h2>SessizliÄŸin Sesi Burada</h2>
  </header>

  <main>
    <div class="status">
      <span id="led" class="led"></span>
      <span id="statusText">YayÄ±nda deÄŸil</span>
    </div>

    <a href="#" id="startButton" class="btn">ğŸ§ CanlÄ± YayÄ±nÄ± BaÅŸlat</a>
  </main>

  <footer>
    Â© 2025 Dingin FM â€” TÃ¼m YayÄ±n ve Ä°Ã§erik HaklarÄ± SaklÄ±dÄ±r
  </footer>

  <script>
    const led = document.getElementById('led');
    const statusText = document.getElementById('statusText');
    const startBtn = document.getElementById('startButton');

    // YayÄ±n durumunu kontrol et
    async function checkStream() {
      try {
        const res = await fetch('/status'); // Sunucuda yayÄ±n durumunu verecek endpoint
        const data = await res.json();
        if(data.live) {
          led.style.backgroundColor = '#00e676';
          statusText.textContent = 'ğŸŸ¢ YayÄ±nda';
        } else {
          led.style.backgroundColor = 'gray';
          statusText.textContent = 'âšª YayÄ±nda deÄŸil';
        }
      } catch(err) {
        led.style.backgroundColor = 'gray';
        statusText.textContent = 'âšª BaÄŸlantÄ± hatasÄ±';
      }
    }

    checkStream();
    setInterval(checkStream, 10000);

    // CanlÄ± yayÄ±nÄ± baÅŸlat
    startBtn.addEventListener('click', () => {
      window.open('/play', '_blank'); // Bu endpoint sunucuda yayÄ±n akÄ±ÅŸÄ±nÄ± baÅŸlatacak
    });
  </script>
</body>
</html>
