<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dingin FM | Canlı Yayın</title>

<style>
html,body{
  margin:0;height:100%;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#000;color:#eaf6ff
}

/* LOGO */
#logo{
  position:fixed;top:12px;left:12px;
  width:180px;height:180px;
  background:url("logo.png") no-repeat center/contain;
  pointer-events:none
}

/* HEADER KARE ▶ */
header{position:fixed;top:16px;right:16px}
#play{
  width:56px;height:56px;border-radius:12px;border:none;
  background:linear-gradient(135deg,#1ecbff,#3a7cff);
  color:#001018;font-size:20px;font-weight:700;cursor:pointer
}
#play.disabled{opacity:.6;cursor:not-allowed}

/* MERKEZ */
.page{height:100%;display:flex;align-items:center;justify-content:center}
#status{letter-spacing:.6px;font-size:15px}
.ready{color:#8fd3ff}
.connecting{color:#ffd36a}
.live{color:#42ff9e}
.error{color:#ff6b6b}
</style>
</head>

<body>

<div id="logo"></div>

<header>
  <button id="play">▶</button>
</header>

<div class="page">
  <div id="status" class="ready">Hazır</div>
</div>

<!-- GERÇEK PLAYER (GÖRÜNMEZ) -->
<audio id="audio" preload="none">
  <!-- PROXY SONRASI SADECE BU SATIRI DEĞİŞTİRECEKSİN -->
  <source src="https://stream.dinginfm.com.tr/stream" type="audio/mpeg">
</audio>

<script>
const btn = document.getElementById("play");
const audio = document.getElementById("audio");
const status = document.getElementById("status");
let busy = false;

function setStatus(cls, text){
  status.className = cls;
  status.textContent = text;
}

btn.onclick = async () => {
  if (busy) return;
  busy = true; btn.classList.add("disabled");
  setStatus("connecting","Bağlanıyor…");

  try{
    // Autoplay kilidi için güvenli başlatma
    audio.muted = true;
    await audio.play();
    audio.muted = false;

    setStatus("live","Yayında");
  }catch(e){
    setStatus("error","Bağlanamadı");
    btn.classList.remove("disabled");
    busy = false;
  }
};

audio.addEventListener("ended", ()=>{
  setStatus("ready","Hazır");
  btn.classList.remove("disabled");
  busy = false;
});
audio.addEventListener("error", ()=>{
  setStatus("error","Bağlanamadı");
  btn.classList.remove("disabled");
  busy = false;
});
</script>

</body>
</html>
