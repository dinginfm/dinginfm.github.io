<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dingin FM â€” CanlÄ± YayÄ±n</title>
<style>
  body {
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#001626;
    color:#e6edf3;
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
  }
  h1 { color:#ffd43b; font-size:32px; margin-bottom:10px; }
  .status {
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:20px;
    font-size:18px;
  }
  .led {
    width:16px;
    height:16px;
    border-radius:50%;
    box-shadow:0 0 10px currentColor;
    transition:0.3s;
  }
  a.button {
    display:inline-block;
    padding:15px 35px;
    background:#ffd43b;
    color:#001626;
    font-weight:700;
    text-decoration:none;
    border-radius:10px;
    font-size:18px;
    transition:0.3s;
  }
  a.button:hover { background:#e6c200; transform:scale(1.05); }
</style>
</head>
<body>

<h1>Dingin FM â€” CanlÄ± YayÄ±n</h1>

<div class="status">
  <span id="led" class="led" style="color:gray;"></span>
  <span id="statusText">YayÄ±n durumu kontrol ediliyor...</span>
</div>

<a href="http://localhost:8000/stream" target="_blank" class="button">ğŸ§ CanlÄ± YayÄ±nÄ± BaÅŸlat</a>

<script>
async function checkStream() {
  const led = document.getElementById('led');
  const statusText = document.getElementById('statusText');
  try {
    // Icecast yayÄ±n URLâ€™in burada
    const res = await fetch('http://localhost:8000/stream', { method:'HEAD', cache:'no-store' });
    if(res.ok){
      led.style.color = '#00e676';
      statusText.textContent = 'ğŸŸ¢ ON AIR Â· Dingin FM YayÄ±nda';
    } else {
      led.style.color = 'gray';
      statusText.textContent = 'âšª YayÄ±nda DeÄŸil';
    }
  } catch(e){
    led.style.color = 'gray';
    statusText.textContent = 'âšª YayÄ±nda DeÄŸil Â· BaÄŸlantÄ± hatasÄ±';
  }
}

// Ä°lk kontrol ve her 10 saniyede bir gÃ¼ncelle
checkStream();
setInterval(checkStream, 10000);
</script>

</body>
</html>
